!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["react-horizontal-scrolling-menu"]={},e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=n(t);const r="react-horizontal-scrolling-menu",i=`${r}--item`,l=`${r}--scroll-container`,s=`${r}--wrapper`,a=`${r}--inner-wrapper`,u=`${r}--header`,d=`${r}--arrow-left`,c=`${r}--arrow-right`,f=`${r}--footer`,h="itemId",v="data-key",m="data-index",p={first:"first",last:"last",onInit:"onInit",onUpdate:"onUpdate"},b="",g={current:null};var y=Object.freeze({__proto__:null,rootClassName:r,itemClassName:i,scrollContainerClassName:l,wrapperClassName:s,innerWrapperClassName:a,headerClassName:u,arrowLeftClassName:d,arrowRightClassName:c,footerClassName:f,id:h,dataKeyAttribute:v,dataIndexAttribute:m,events:p,emptyStr:b,emptyRef:g});class w{constructor(){this.subscribe=(e,t)=>{this.observers.set(e,(this.observers.get(e)||[]).concat(t))},this.unsubscribe=(e,t)=>{const n=(this.observers.get(e)||[]).filter((e=>e!==t));n.length?this.observers.set(e,n):this.observers.delete(e)},this.emitUpdates=(e,t)=>{const n=this.observers.get(e)||[];null==n||n.forEach((e=>e(t)))},this.updateBatch=(e,t=!0)=>{e.length&&(e.forEach((([e,t])=>this.emitUpdates(e,t))),t&&this.emitUpdates(p.onUpdate))},this.update=(e,t)=>{this.emitUpdates(e,t),this.emitUpdates(p.onUpdate)},this.observers=new Map}}class M extends Map{constructor(){super(),this.subscribe=(e,t)=>this.observer.subscribe(e,t),this.unsubscribe=(e,t)=>this.observer.unsubscribe(e,t),this.isEdgeItem=({key:e,value:t,first:n=this.first(),last:o=this.last()})=>{const r=[];return e===(null==n?void 0:n.key)?r.push([p.first,t]):e===(null==o?void 0:o.key)&&r.push([p.last,t]),r},this.edgeItemsCheck=e=>{const t=this.first(),n=this.last(),o=e.find((([e])=>e===(null==t?void 0:t.key))),r=[];o&&r.push([p.first,o[1]]);const i=e.find((([e])=>e===(null==n?void 0:n.key)));return i&&r.push([p.last,i[1]]),r},this.toArr=()=>this.sort([...this]),this.toItems=()=>this.toArr().map((([e])=>e)),this.sort=e=>e.sort((([,e],[,t])=>+e.index-+t.index)),this.set=(e,t)=>{const n=String(e),o=[[n,t]];return super.set(n,t),o.push(...this.isEdgeItem({key:n,value:t,first:this.first(),last:this.last()})),this.observer.updateBatch(o),this},this.setBatch=e=>{this.firstRun&&this.observer.update(p.onInit);const t=[...e];return this.sort(t).forEach((([e,t])=>{super.set(String(e),t)})),t.push(...this.edgeItemsCheck(t)),this.observer.updateBatch(t,!this.firstRun),this.firstRun=!1,this},this.first=()=>{var e;return null===(e=this.toArr()[0])||void 0===e?void 0:e[1]},this.last=()=>{var e,t;return null===(t=null===(e=this.toArr().slice(-1))||void 0===e?void 0:e[0])||void 0===t?void 0:t[1]},this.filter=e=>this.toArr().filter(e),this.find=e=>this.toArr().find(e),this.findIndex=e=>this.toArr().findIndex(e),this.getCurrentPos=e=>{const t=this.toArr(),n=t.findIndex((([t,n])=>t===e||n===e));return[t,n]},this.prev=e=>{var t;const[n,o]=this.getCurrentPos(e);return-1!==o?null===(t=n[o-1])||void 0===t?void 0:t[1]:void 0},this.next=e=>{var t;const[n,o]=this.getCurrentPos(e);return-1!==o?null===(t=n[o+1])||void 0===t?void 0:t[1]:void 0},this.getVisible=()=>this.filter((e=>e[1].visible)),this.observer=new w,this.firstRun=!0}}const C=e=>"object"==typeof e&&null!=e&&1===e.nodeType,E=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,I=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const n=getComputedStyle(e,null);return E(n.overflowY,t)||E(n.overflowX,t)||(e=>{const t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(e)}return!1},x=(e,t,n,o,r,i,l,s)=>i<e&&l>t||i>e&&l<t?0:i<=e&&s<=n||l>=t&&s>=n?i-e-o:l>t&&s<n||i<e&&s>n?l-t+r:0,N=e=>{const t=e.parentElement;return null==t?e.getRootNode().host||null:t},k=(e,t)=>{var n,o,r,i;if("undefined"==typeof document)return[];const{scrollMode:l,block:s,inline:a,boundary:u,skipOverflowHiddenElements:d}=t,c="function"==typeof u?u:e=>e!==u;if(!C(e))throw new TypeError("Invalid target");const f=document.scrollingElement||document.documentElement,h=[];let v=e;for(;C(v)&&c(v);){if(v=N(v),v===f){h.push(v);break}null!=v&&v===document.body&&I(v)&&!I(document.documentElement)||null!=v&&I(v,d)&&h.push(v)}const m=null!=(o=null==(n=window.visualViewport)?void 0:n.width)?o:innerWidth,p=null!=(i=null==(r=window.visualViewport)?void 0:r.height)?i:innerHeight,{scrollX:b,scrollY:g}=window,{height:y,width:w,top:M,right:E,bottom:k,left:S}=e.getBoundingClientRect(),{top:R,right:j,bottom:T,left:$}=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);let O="start"===s||"nearest"===s?M-R:"end"===s?k+T:M+y/2-R+T,W="center"===a?S+w/2-$+j:"end"===a?E+j:S-$;const B=[];for(let e=0;e<h.length;e++){const t=h[e],{height:n,width:o,top:r,right:i,bottom:u,left:d}=t.getBoundingClientRect();if("if-needed"===l&&M>=0&&S>=0&&k<=p&&E<=m&&M>=r&&k<=u&&S>=d&&E<=i)return B;const c=getComputedStyle(t),v=parseInt(c.borderLeftWidth,10),C=parseInt(c.borderTopWidth,10),I=parseInt(c.borderRightWidth,10),N=parseInt(c.borderBottomWidth,10);let R=0,j=0;const T="offsetWidth"in t?t.offsetWidth-t.clientWidth-v-I:0,$="offsetHeight"in t?t.offsetHeight-t.clientHeight-C-N:0,H="offsetWidth"in t?0===t.offsetWidth?0:o/t.offsetWidth:0,L="offsetHeight"in t?0===t.offsetHeight?0:n/t.offsetHeight:0;if(f===t)R="start"===s?O:"end"===s?O-p:"nearest"===s?x(g,g+p,p,C,N,g+O,g+O+y,y):O-p/2,j="start"===a?W:"center"===a?W-m/2:"end"===a?W-m:x(b,b+m,m,v,I,b+W,b+W+w,w),R=Math.max(0,R+g),j=Math.max(0,j+b);else{R="start"===s?O-r-C:"end"===s?O-u+N+$:"nearest"===s?x(r,u,n,C,N+$,O,O+y,y):O-(r+n/2)+$/2,j="start"===a?W-d-v:"center"===a?W-(d+o/2)+T/2:"end"===a?W-i+I+T:x(d,i,o,v,I+T,W,W+w,w);const{scrollLeft:e,scrollTop:l}=t;R=0===L?0:Math.max(0,Math.min(l+R/L,t.scrollHeight-n/L+$)),j=0===H?0:Math.max(0,Math.min(e+j/H,t.scrollWidth-o/H+T)),O+=l-R,W+=e-j}B.push({el:t,top:R,left:j})}return B};function S(e,t){if(!e.isConnected||!(e=>{let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1})(e))return;const n=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);if((e=>"object"==typeof e&&"function"==typeof e.behavior)(t))return t.behavior(k(e,t));const o="boolean"==typeof t||null==t?void 0:t.behavior;for(const{el:r,top:i,left:l}of k(e,(e=>!1===e?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&0!==Object.keys(e).length)(e)?e:{block:"start",inline:"nearest"})(t))){const e=i-n.top+n.bottom,t=l-n.left+n.right;r.scroll({top:e,left:t,behavior:o})}}let R;const j=()=>(R||(R="performance"in window?performance.now.bind(performance):Date.now),R());function T(e){const t=j(),n=Math.min((t-e.startTime)/e.duration,1),o=e.ease(n),r=e.startX+(e.x-e.startX)*o,i=e.startY+(e.y-e.startY)*o;e.method(r,i,n,o),r!==e.x||i!==e.y?requestAnimationFrame((()=>T(e))):e.cb()}function $(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e=>1+--e*e*e*e*e,i=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;const s=e,a=e.scrollLeft,u=e.scrollTop;T({scrollable:s,method:(t,n,o,r)=>{const i=Math.ceil(t),s=Math.ceil(n);e.scrollLeft=i,e.scrollTop=s,null==l||l({target:e,elapsed:o,value:r,left:i,top:s})},startTime:j(),startX:a,startY:u,x:t,y:n,duration:o,ease:r,cb:i})}const O=function(e,t){const n=t||{};return(e=>e&&!e.behavior||"smooth"===e.behavior)(n)?S(e,{block:n.block,inline:n.inline,scrollMode:n.scrollMode,boundary:n.boundary,skipOverflowHiddenElements:n.skipOverflowHiddenElements,behavior:e=>Promise.all(e.reduce(((e,t)=>{let{el:o,left:r,top:i}=t;const l=o.scrollLeft,s=o.scrollTop;return l===r&&s===i?e:[...e,new Promise((e=>$(o,r,i,n.duration,n.ease,(()=>e({el:o,left:[l,r],top:[s,i]})),n.onScrollChange)))]}),[]))}):Promise.resolve(S(e,t))},W=e=>Object.values(e).map((e=>e.current)).filter(Boolean);function B(e,t,n,o,r,i){var l;const s=(null===(l=null==e?void 0:e.entry)||void 0===l?void 0:l.target)||e;if(!s)return;const a={behavior:t||"smooth",inline:n||"end",block:o||"nearest"};return i?s.scrollIntoView(a):O(s,Object.assign(Object.assign({},r),a))}const H=e=>document.querySelector(`[${v}='${e}']`),L=e=>document.querySelector(`[${m}='${e}']`);function U(e){return o.default.isValidElement(e)&&e||"function"==typeof e&&o.default.createElement(e,null)||!!e&&"object"==typeof e&&o.default.createElement(e,null)||null}const A=e=>{var t;return String((null===(t=null==e?void 0:e.props)||void 0===t?void 0:t[h])||String((null==e?void 0:e.key)||b).replace(/^\.\$/,b))};function V(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"current")}var P=o.default.memo((function({children:e,className:t,id:n,index:r,refs:i}){const l=o.default.useRef(null);return i[String(r)]=l,o.default.createElement("div",{className:t,[v]:n,[m]:r,ref:l},e)}));function F({children:e,itemClassName:t=b,refs:n}){const r=o.default.Children.toArray(e).filter(Boolean),l=o.default.useMemo((()=>`${i} ${t}`),[t]);return r.map(((e,t)=>{const r=A(e);return o.default.createElement(P,{className:l,id:r,key:r,refs:n,index:t},e)}))}function D({className:e=b,children:t,onScroll:n=(()=>{}),scrollRef:r,containerRef:i}){const s=o.default.useMemo((()=>`${l} ${e}`),[e]),a=o.default.useCallback((e=>{V(r)?r.current=e:r(e),V(i)?i.current=e:i(e)}),[r,i]);return o.default.createElement("div",{className:s,onScroll:n,ref:a},t)}const _=o.default.createContext({});const X="undefined"!=typeof window?o.default.useLayoutEffect:o.default.useEffect;function Y({items:e,itemsChanged:t,refs:n,options:r}){const i=o.default.useRef(),l=o.default.useCallback((t=>{e.setBatch(function(e,t){return[...e].map((e=>{var n,o,r,i;const l=e.target,s=String(null!==(o=null===(n=null==l?void 0:l.dataset)||void 0===n?void 0:n.key)&&void 0!==o?o:b);return[s,{index:String(null!==(i=null===(r=null==l?void 0:l.dataset)||void 0===r?void 0:r.index)&&void 0!==i?i:b),key:s,entry:e,visible:e.intersectionRatio>=t.ratio}]}))}(t,r))}),[e,r]);X((()=>{const e=W(n),t=i.current||new IntersectionObserver(l,r);return i.current=t,e.forEach((e=>t.observe(e))),()=>{t.disconnect(),i.current=void 0}}),[l,t,r,n])}const q=e=>o.default.Children.toArray(e).map(A).filter(Boolean);const z={ratio:.9,rootMargin:"5px",threshold:[.05,.5,.75,.95]};const K={current:{}},G=()=>{};e.ScrollMenu=function({LeftArrow:e,RightArrow:t,children:n,Header:r,Footer:i,transitionDuration:l=500,transitionBehavior:h,onInit:v=G,onUpdate:m=G,onMouseDown:y,onMouseLeave:w,onMouseUp:C,onMouseMove:E,onScroll:I=G,onTouchMove:x,onTouchStart:N,onTouchEnd:k,onWheel:S=G,options:R=z,scrollContainerClassName:j=b,containerRef:T=g,itemClassName:$=b,wrapperClassName:O=b,apiRef:W=K,RTL:A,noPolyfill:P}){const X=U(e),J=U(t),Q=U(r),Z=U(i),ee=o.default.useRef(null),[te]=o.default.useState({}),ne=o.default.useMemo((()=>Object.assign(Object.assign(Object.assign({},z),R),{root:ee.current})),[R]),oe=o.default.useRef(new M).current,re=function(e,t){const[n,r]=o.default.useState(b),i=o.default.useMemo((()=>q(e)),[e]);return o.default.useEffect((()=>{const e=i.filter(Boolean).join(b);t.toItems().filter((e=>!i.includes(e))).forEach((e=>{t.delete(e)})),r(e)}),[i,t]),n}(n,oe);Y(o.default.useMemo((()=>({items:oe,itemsChanged:re,options:ne,refs:te})),[oe,re,te,ne]));const ie=o.default.useMemo((()=>function(e,t,n){var r,i,l;const s=!!(null===(r=e.first())||void 0===r?void 0:r.visible),a=!!(null===(i=e.last())||void 0===i?void 0:i.visible),u=t=>{var n;return null===(n=e.find((e=>e[1].key===String(t))))||void 0===n?void 0:n[1]},d=()=>{var t,n;const o=null===(n=null===(t=e.getVisible())||void 0===t?void 0:t[0])||void 0===n?void 0:n[1];return o?e.prev(o):void 0},c=()=>{var t;const n=null===(t=e.getVisible().findLast((()=>!0)))||void 0===t?void 0:t[1];return n?e.next(n):void 0},f=null===(l=null==t?void 0:t.boundary)||void 0===l?void 0:l.current;return{getItemById:u,getItemElementById:H,getItemByIndex:t=>{var n;return null===(n=e.find((e=>String(e[1].index)===String(t))))||void 0===n?void 0:n[1]},getItemElementByIndex:L,getNextElement:c,getPrevElement:d,isFirstItemVisible:s,isItemVisible:t=>e.getVisible().map((e=>e[0])).includes(String(t)),isLastItem:t=>e.last()===u(t),isLastItemVisible:a,scrollNext:(e,o,r,{duration:i,boundary:l=f}={})=>{const s=null!=e?e:null==t?void 0:t.behavior;return B(c(),s,o||"start",r||"nearest",{boundary:l,duration:null!=i?i:null==t?void 0:t.duration},n)},scrollPrev:(e,o,r,{duration:i,boundary:l=f}={})=>{const s=null!=e?e:null==t?void 0:t.behavior;return B(d(),s,o||"end",r||"nearest",{boundary:l,duration:null!=i?i:null==t?void 0:t.duration},n)},useIsVisible:(t,n=!1)=>{const[r,i]=o.default.useState(n),l=o.default.useCallback((e=>{i(!!(null==e?void 0:e.visible))}),[]);return o.default.useEffect((()=>(e.subscribe(t,l),()=>{e.unsubscribe(t,l)})),[t,l]),r},scrollToItem:(e,o,r,i,l)=>{var s;return B(e,null!=o?o:null==t?void 0:t.behavior,r,i,Object.assign(Object.assign({boundary:f},l),{duration:null!==(s=null==l?void 0:l.duration)&&void 0!==s?s:null==t?void 0:t.duration}),n)}}}(oe,{duration:l,behavior:h,boundary:ee},P)),[oe,l,h,P]),le=o.default.useCallback((()=>Object.assign(Object.assign({},ie),{items:oe,scrollContainer:ee})),[ie,oe,ee]),[se,ae]=o.default.useState((()=>le()));(({context:e,onInit:t,onUpdate:n})=>{const r=o.default.useCallback((()=>t(e)),[t,e]),i=o.default.useCallback((()=>n(e)),[n,e]),{items:l}=e;o.default.useEffect((()=>(l.subscribe(p.onInit,r),l.subscribe(p.onUpdate,i),()=>{l.unsubscribe(p.onInit,r),l.unsubscribe(p.onUpdate,i)})),[l,r,i])})({context:se,onInit:v,onUpdate:m}),o.default.useEffect((()=>ae(le())),[le]),o.default.useEffect((()=>{V(W)?W.current=se:W(se)}),[se,W]);const ue=o.default.useCallback((e=>I(se,e)),[I,se]),de=o.default.useCallback((e=>S(se,e)),[S,se]),ce=o.default.useMemo((()=>`${s} ${O}`),[O]),fe=o.default.useMemo((()=>`${j}${A?" rtl":b}`),[A,j]);return o.default.createElement("div",{className:ce,onWheel:de,onMouseDown:null==y?void 0:y(se),onMouseLeave:null==w?void 0:w(se),onMouseUp:null==C?void 0:C(se),onMouseMove:null==E?void 0:E(se),onTouchStart:null==N?void 0:N(se),onTouchMove:null==x?void 0:x(se),onTouchEnd:null==k?void 0:k(se)},o.default.createElement(_.Provider,{value:se},o.default.createElement("div",{className:u},Q),o.default.createElement("div",{className:a},o.default.createElement("div",{className:d},X),o.default.createElement(D,{className:fe,onScroll:ue,scrollRef:ee,containerRef:T},o.default.createElement(F,{refs:te,itemClassName:$},n)),o.default.createElement("div",{className:c},J)),o.default.createElement("div",{className:f},Z)))},e.VisibilityContext=_,e.constants=y,e.getItemsPos=e=>{var t;const n=e[Math.floor(e.length/2)];return{first:null==e?void 0:e[0],center:n,last:null===(t=e.slice(-1))||void 0===t?void 0:t[0]}},e.slidingWindow=function(e,t){return{prev:()=>function(e,t){const n=e.findIndex((e=>e===(null==t?void 0:t[0]))),o=t.length,r=n-o,i=r<0,l=i?0:r,s=e.slice(l,i?o:n);return s.length===o?s:e.slice(n,o)}(e,t),next:()=>function(e,t){const n=e.findIndex((e=>{var n;return e===(null===(n=t.slice(-1))||void 0===n?void 0:n[0])})),o=t.length,r=n+o+1,i=r>e.length-1,l=i?e.length-1:r,s=e.slice(i?l-o+1:n+1,l);return s.length===o?s:e.slice(e.length-o,e.length+o)}(e,t)}},Object.defineProperty(e,"__esModule",{value:!0})}));
